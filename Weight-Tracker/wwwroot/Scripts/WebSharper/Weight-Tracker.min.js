(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;b=a.Weight_Tracker=a.Weight_Tracker||{};c=b.Client=b.Client||{};d=c.Weight=c.Weight||{};e=a["StartupCode$Weight-Tracker$Client"]=a["StartupCode$Weight-Tracker$Client"]||{};f=a["Weight-Tracker_Templates"]=a["Weight-Tracker_Templates"]||{};g=a.Math;h=a.WebSharper;i=h&&h.List;j=h&&h.UI;k=j&&j.Templating;l=k&&k.Runtime;m=l&&l.Server;n=m&&m.ProviderBuilder;o=m&&m.Handler;p=m&&m.TemplateInstance;q=j&&j.Var$1;r=j&&j.ListModel;s=h&&h.Enumerator;t=j&&j.Doc;u=h&&h.Seq;v=h&&h.Charting;w=v&&v.Chart;x=v&&v.Pervasives;y=v&&v.Renderers;z=y&&y.ChartJs;A=j&&j.Client;B=A&&A.Templates;d.Create=function(C,D,E){return d.New(C,D,E);};d.New=function(C,D,E){return{WeightValue:C,WeightDate:D,gains:E};};c.Main$96$20=function(C,D,E,F){return function(G){var H;if(G.Vars.Hole("entredwweight").$1.Get()===""||G.Vars.Hole("entreddate").$1.Get()===""||!C(G.Vars.Hole("entredwweight").$1.Get()))D.Set("Please enter a valid input value");else{D.Set("");E.Append(d.Create(G.Vars.Hole("entredwweight").$1.Get(),G.Vars.Hole("entreddate").$1.Get(),g.round((a.Number(G.Vars.Hole("entredwweight").$1.Get())-c.lastitem())*1000)/1000));G.Vars.Hole("entredwweight").$1.Get();E.Iter(function(I){c.datah().Append([I.WeightDate,a.Number(I.WeightValue)]);});c.set_dataty((H=i.ofArray([["chou",5]]),i.append(c.dataty(),H)));D.Set("the value was added !");F.__UpdateData(5,function(I){return I+10;});}};};c.Main=function(){var C,D,E,F,G,H,I,J,K,L,M,N,O,R,S,T,U;function P(V){var W,X,Y,Z,_0,_1;return(W=(X=(Y=(Z=new n.New$1(),(Z.h.push({$:1,$0:"weight",$1:V.WeightValue}),Z)),(Y.h.push({$:1,$0:"date",$1:V.WeightDate}),Y)),(X.h.push({$:1,$0:"gains",$1:a.String(V.gains)}),X)),(_0=o.CompleteHoles(W.k,W.h,[]),(_1=new p.New(_0[1],f.input(_0[0])),W.i=_1,_1))).get_Doc();}function Q(V){var W,X;return(W=0,[(X=a.Number(V),a.isNaN(X)?false:(W=X,true)),W])[0];}q.Create$1("");R=r.FromSeq([]);R.Clear();c.weightHistory().Iter(function(V){R.Append(d.Create(V.WeightValue,V.WeightDate,V.gains));});S=s.Get(R);try{while(S.MoveNext()){T=S.Current();c.set_dataty((U=i.ofArray([[T.WeightDate,a.Number(T.WeightValue)]]),i.append(c.dataty(),U)));}}finally{if(typeof S=="object"&&"Dispose"in S)S.Dispose();}D=t.BindView(function(V){return t.Concat(u.map(P,u.sortBy(function(W){return W.WeightDate;},V)));},R.v);E=w.Line$1(c.dataty()).__WithFillColor(new x.Color({$:0,$0:120,$1:120,$2:120,$3:0.2}));F=q.Create$1("");q.Create$1("");q.Create$1("");return(G=(H=F.get_View(),I=(J=z.Render$8(E,null,null,{$:1,$0:10}),K=(L=(M=new n.New$1(),M.h.push({$:0,$0:"window",$1:D}),M),L.h.push(o.EventQ2(L.k,"onsend",function(){return L.i;},function(V){var W;if(V.Vars.Hole("entredwweight").$1.Get()===""||V.Vars.Hole("entreddate").$1.Get()===""||!Q(V.Vars.Hole("entredwweight").$1.Get()))F.Set("Please enter a valid input value");else{F.Set("");R.Append(d.Create(V.Vars.Hole("entredwweight").$1.Get(),V.Vars.Hole("entreddate").$1.Get(),g.round((a.Number(V.Vars.Hole("entredwweight").$1.Get())-c.lastitem())*1000)/1000));V.Vars.Hole("entredwweight").$1.Get();R.Iter(function(X){c.datah().Append([X.WeightDate,a.Number(X.WeightValue)]);});c.set_dataty((W=i.ofArray([["chou",5]]),i.append(c.dataty(),W)));F.Set("the value was added !");E.__UpdateData(5,function(X){return X+10;});}})),L),K.h.push({$:0,$0:"graph",$1:J}),K),I.h.push({$:2,$0:"reversed",$1:H}),I),N=o.CompleteHoles(G.k,G.h,[["entredwweight",0,null],["entreddate",0,null]]),O=new p.New(N[1],f.mainform(N[0])),G.i=O,O).get_Doc();};c.dataty=function(){e.$cctor();return e.dataty;};c.set_dataty=function(C){e.$cctor();e.dataty=C;};c.datah=function(){e.$cctor();return e.datah;};c.lastitem=function(){e.$cctor();return e.lastitem;};c.weightHistory=function(){e.$cctor();return e.weightHistory;};e.$cctor=function(){e.$cctor=a.ignore;e.weightHistory=r.FromSeq([d.Create("70","2022-04-01",0),d.Create("70.2","2022-04-02",0.2),d.Create("70","2022-04-03",-0.2),d.Create("70.1","2022-04-04",0.1)]);e.lastitem=70.1;e.datah=r.FromSeq([]);c.weightHistory().Iter(function(C){c.datah().Append([a.String(C.WeightDate),a.Number(C.WeightValue)]);});e.dataty=i.T.Empty;};f.input=function(C){B.LoadLocalTemplates("main");return C?B.NamedTemplate("main",{$:1,$0:"input"},C):void 0;};f.mainform=function(C){B.LoadLocalTemplates("main");return C?B.NamedTemplate("main",{$:1,$0:"mainform"},C):void 0;};}(self));
